<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>ìš”ì½”í•˜ë§ˆ ì—¬í–‰ ê°€ì´ë“œ</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;600;700&display=swap" rel="stylesheet">
<style>
:root {
  --bg-color: #f8f9f6;
  --text-color: #333;
  --card-bg: #fff;
  --primary: #5aa897;
  --primary-dark: #4a8a7f;
  --accent: #e63946;
  --nav-bg: #fff;
  --shadow: 0 2px 10px rgba(0,0,0,0.1);
  --muted: #777;
  --border: rgba(0,0,0,0.1);
}

body.dark-mode {
  --bg-color: #121418;
  --text-color: #f3f3f3;
  --card-bg: #1b1e24;
  --primary: #7bc8b5;
  --primary-dark: #5aa897;
  --nav-bg: #191c23;
  --shadow: 0 2px 15px rgba(0,0,0,0.7);
  --muted: #aaa;
  --border: rgba(255,255,255,0.1);
}

html, body {
  margin: 0;
  padding: 0;
}

body {
  font-family: 'Noto Sans KR', sans-serif;
  background: var(--bg-color);
  color: var(--text-color);
  overflow-x: hidden;
  line-height: 1.6;
}

/* í”„ë¦¬ë¡œë” */
#preloader {
  position: fixed;
  inset: 0;
  background: radial-gradient(circle at top, #5aa897 0, #121418 55%);
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  z-index: 5000;
  transition: opacity 0.4s, visibility 0.4s;
}
#preloader.hide {
  opacity: 0;
  visibility: hidden;
  pointer-events: none;
}
.loader-logo {
  font-size: 26px;
  font-weight: 700;
  color: #fff;
  letter-spacing: 4px;
  margin-bottom: 16px;
}
.loader-bar {
  width: 160px;
  height: 4px;
  border-radius: 999px;
  background: rgba(255,255,255,0.25);
  overflow: hidden;
  position: relative;
}
.loader-bar::before {
  content: "";
  position: absolute;
  inset: 0;
  width: 40%;
  background: linear-gradient(90deg, #fff, #f9d976);
  animation: loadingSlide 1.2s infinite ease-in-out;
}
@keyframes loadingSlide {
  0% { transform: translateX(-100%); }
  50% { transform: translateX(60%); }
  100% { transform: translateX(160%); }
}

/* ë„¤ë¹„ê²Œì´ì…˜ */
.navbar {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 70px;
  background: var(--nav-bg);
  box-shadow: var(--shadow);
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0 60px;
  z-index: 2000;
  transition: background 0.3s;
}
.navbar h1 {
  color: var(--primary);
  font-size: 22px;
  cursor: pointer;
  transition: transform 0.2s;
}
.navbar h1:hover {
  transform: scale(1.05);
}
.nav-menu {
  display: flex;
  gap: 30px;
  align-items: center;
}
.nav-menu a {
  color: var(--text-color);
  text-decoration: none;
  font-weight: 600;
  font-size: 15px;
  transition: color 0.3s;
  position: relative;
}
.nav-menu a::after {
  content: "";
  position: absolute;
  bottom: -5px;
  left: 0;
  width: 0;
  height: 2px;
  background: var(--primary);
  transition: width 0.3s;
}
.nav-menu a:hover::after,
.nav-menu a.active::after {
  width: 100%;
}
.nav-menu a:hover,
.nav-menu a.active {
  color: var(--primary);
}
.dropdown {
  position: relative;
}
.dropdown-content {
  position: absolute;
  top: 50px;
  left: 0;
  background: var(--card-bg);
  border-radius: 12px;
  box-shadow: var(--shadow);
  width: 190px;
  opacity: 0;
  visibility: hidden;
  transform: translateY(-10px);
  transition: all 0.3s;
  overflow: hidden;
  z-index: 2500;
}
.dropdown:hover .dropdown-content {
  opacity: 1;
  visibility: visible;
  transform: translateY(0);
}
.dropdown-content a {
  display: block;
  padding: 12px 16px;
  text-decoration: none;
  color: var(--text-color);
  font-weight: 500;
  border-bottom: 1px solid var(--border);
  transition: background 0.2s;
}
.dropdown-content a:last-child {
  border-bottom: none;
}
.dropdown-content a:hover {
  background: rgba(90,168,151,0.08);
  color: var(--primary);
}

/* ê²€ìƒ‰ */
.search-box {
  position: relative;
  margin-right: 12px;
}
.search-box input {
  padding: 8px 35px 8px 12px;
  border: 1.5px solid var(--border);
  border-radius: 20px;
  outline: none;
  width: 200px;
  transition: all 0.3s;
  background: var(--bg-color);
  color: var(--text-color);
}
.search-box input:focus {
  width: 260px;
  border-color: var(--primary);
  box-shadow: 0 0 0 3px rgba(90,168,151,0.1);
}
.search-icon {
  position: absolute;
  right: 12px;
  top: 50%;
  transform: translateY(-50%);
  color: var(--muted);
  pointer-events: none;
  font-size: 16px;
}
.suggestions {
  position: absolute;
  top: 45px;
  left: 0;
  width: 100%;
  background: var(--card-bg);
  border-radius: 10px;
  box-shadow: var(--shadow);
  overflow: hidden;
  display: none;
  z-index: 3000;
  max-height: 300px;
  overflow-y: auto;
}
.suggestions div {
  padding: 10px 12px;
  cursor: pointer;
  font-size: 14px;
  transition: background 0.2s;
  border-bottom: 1px solid var(--border);
}
.suggestions div:last-child {
  border-bottom: none;
}
.suggestions div:hover {
  background: rgba(90,168,151,0.08);
  color: var(--primary);
}

/* ë‹¤í¬ëª¨ë“œ í† ê¸€ */
.theme-toggle {
  border: none;
  background: transparent;
  cursor: pointer;
  font-size: 20px;
  margin-right: 8px;
  padding: 8px;
  border-radius: 50%;
  transition: all 0.3s;
}
.theme-toggle:hover {
  background: rgba(90,168,151,0.1);
  transform: rotate(20deg);
}
.theme-toggle.sun {
  color: #ffd84d;
}
.theme-toggle.moon {
  color: var(--primary-dark);
}

/* ìŠ¤í¬ë¡¤ ì§„í–‰ë°” */
.scroll-progress {
  position: fixed;
  top: 70px;
  left: 0;
  width: 0;
  height: 3px;
  background: linear-gradient(90deg, #5aa897, #e8b44f);
  z-index: 1999;
  transition: width 0.1s;
}

/* ë°°ë„ˆ */
.hero {
  position: relative;
  margin-top: 73px;
  height: 480px;
  background: linear-gradient(135deg, #667eea 0, #764ba2 100%);
  display: flex;
  align-items: center;
  justify-content: center;
  color: #fff;
  overflow: hidden;
}
.hero::before {
  content: "";
  position: absolute;
  inset: 0;
  background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 320"><path fill="%23ffffff" fill-opacity="0.1" d="M0,96L48,112C96,128,192,160,288,160C384,160,480,128,576,122.7C672,117,768,139,864,154.7C960,171,1056,181,1152,165.3C1248,149,1344,107,1392,85.3L1440,64L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z"></path></svg>') bottom center no-repeat;
  background-size: cover;
  animation: waveAnimation 8s ease-in-out infinite;
}
@keyframes waveAnimation {
  0%,100% { transform: translateX(0); }
  50% { transform: translateX(-20px); }
}
.hero::after {
  content: "";
  position: absolute;
  inset: 0;
  background: rgba(0,0,0,0.3);
}
.hero-text {
  position: relative;
  text-align: center;
  z-index: 10;
  animation: fadeInUp 0.8s ease-out;
}
@keyframes fadeInUp {
  from { opacity: 0; transform: translateY(30px); }
  to { opacity: 1; transform: translateY(0); }
}
.hero-text h2 {
  font-size: 46px;
  margin-bottom: 10px;
  text-shadow: 2px 2px 8px rgba(0,0,0,0.3);
}
.hero-text p {
  font-size: 20px;
  opacity: 0.9;
  text-shadow: 1px 1px 4px rgba(0,0,0,0.3);
}
.weather-widget {
  position: absolute;
  right: 28px;
  bottom: 30px;
  padding: 12px 18px;
  border-radius: 20px;
  background: rgba(0,0,0,0.5);
  font-size: 13px;
  color: #f5f5f5;
  backdrop-filter: blur(8px);
  z-index: 10;
  transition: transform 0.3s;
  cursor: pointer;
}
.weather-widget:hover {
  transform: translateY(-3px);
  background: rgba(0,0,0,0.6);
}

/* ë¹ ë¥¸ í†µê³„ */
.quick-stats {
  max-width: 1100px;
  margin: 30px auto 0;
  padding: 0 20px;
  display: grid;
  grid-template-columns: repeat(auto-fit,minmax(200px,1fr));
  gap: 20px;
}
.stat-card {
  background: var(--card-bg);
  padding: 20px;
  border-radius: 14px;
  box-shadow: var(--shadow);
  text-align: center;
  transition: all 0.3s;
  cursor: pointer;
}
.stat-card:hover {
  transform: translateY(-5px);
  box-shadow: 0 8px 20px rgba(0,0,0,0.15);
}
.stat-number {
  font-size: 32px;
  font-weight: 700;
  color: var(--primary);
  margin-bottom: 5px;
}
.stat-label {
  font-size: 20px;
  color: var(--muted);
}

/* ì¼ìˆ˜ ì„ íƒ ë²„íŠ¼ */
.day-selector {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
}
.day-btn {
  border-radius: 20px;
  border: 2px solid var(--border);
  padding: 8px 20px;
  font-size: 14px;
  font-weight: 600;
  background: var(--card-bg);
  color: var(--text-color);
  cursor: pointer;
  transition: all 0.3s;
  min-width: 70px;
}
.day-btn:hover {
  border-color: var(--primary);
  background: rgba(90,168,151,0.1);
  transform: translateY(-2px);
}
.day-btn.active {
  background: var(--primary);
  color: #fff;
  border-color: var(--primary);
  box-shadow: 0 4px 8px rgba(90,168,151,0.3);
}

/* í”Œë˜ë„ˆ */
.planner {
  max-width: 1100px;
  margin: 35px auto 5px;
  padding: 0 20px;
}
.planner-header {
  display: flex;
  flex-wrap: wrap;
  justify-content: space-between;
  align-items: center;
  gap: 12px;
}
.planner-header h2 {
  font-size: 32px;
  display: flex;
  align-items: center;
  gap: 10px;
}
.planner-toggle-btn {
  border: none;
  background: var(--primary);
  color: #fff;
  padding: 10px 20px;
  border-radius: 20px;
  cursor: pointer;
  font-size: 14px;
  font-weight: 600;
  box-shadow: var(--shadow);
  transition: all 0.3s;
}
.planner-toggle-btn:hover {
  background: var(--primary-dark);
  transform: translateY(-2px);
}
.planner-box {
  background: var(--card-bg);
  margin-top: 15px;
  border-radius: 14px;
  padding: 0 18px;
  max-height: 0;
  overflow: hidden;
  box-shadow: var(--shadow);
  transition: all 0.4s;
}
.planner-box.open {
  max-height: 800px;
  padding-top: 18px;
  padding-bottom: 22px;
}
.planner-subtitle {
  margin-top: 8px;
  font-size: 14px;
  color: var(--muted);
  line-height: 1.5;
}
.keyword-box {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
  margin: 15px 0 12px;
}
.keyword-box button {
  border-radius: 20px;
  border: 2px solid var(--primary);
  padding: 8px 16px;
  font-size: 13px;
  background: transparent;
  cursor: pointer;
  color: var(--primary);
  font-weight: 600;
  transition: all 0.3s;
}
.keyword-box button:hover {
  background: rgba(90,168,151,0.1);
  transform: translateY(-2px);
}
.keyword-box button.active {
  background: var(--primary);
  color: #fff;
  box-shadow: 0 4px 8px rgba(90,168,151,0.3);
}
.planner-generate-btn {
  border: none;
  background: var(--accent);
  color: #fff;
  padding: 10px 20px;
  border-radius: 20px;
  font-size: 14px;
  font-weight: 600;
  cursor: pointer;
  margin-bottom: 12px;
  transition: all 0.3s;
  box-shadow: 0 4px 8px rgba(230,57,70,0.3);
}
.planner-generate-btn:hover {
  background: #d62839;
  transform: translateY(-2px);
}
.planner-result {
  margin-top: 10px;
  animation: fadeIn 0.5s;
}
@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}
.planner-table {
  width: 100%;
  border-collapse: collapse;
  font-size: 14px;
  margin-top: 10px;
}
.planner-table th {
  background: var(--primary);
  color: #fff;
  padding: 12px;
  text-align: left;
  font-weight: 600;
}
.planner-table td {
  background: rgba(90,168,151,0.05);
  padding: 12px;
  border-bottom: 1px solid var(--border);
}
.planner-table tr:last-child td {
  border-bottom: none;
}

/* í•„í„°ë°” */
.filter-bar {
  max-width: 1100px;
  margin: 25px auto 10px;
  padding: 0 20px;
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
  align-items: center;
}
.filter-bar span {
  font-size: 15px;
  font-weight: 600;
  color: var(--text-color);
  margin-right: 5px;
}
.filter-bar button {
  border-radius: 20px;
  border: 2px solid var(--border);
  padding: 8px 18px;
  font-size: 13px;
  font-weight: 600;
  background: var(--card-bg);
  color: var(--text-color);
  cursor: pointer;
  transition: all 0.3s;
}
.filter-bar button:hover {
  border-color: var(--primary);
  background: rgba(90,168,151,0.1);
  transform: translateY(-2px);
}
.filter-bar button.active {
  background: var(--primary);
  color: #fff;
  border-color: var(--primary);
  box-shadow: 0 4px 8px rgba(90,168,151,0.3);
}

/* ì¹´ë“œ ê·¸ë¦¬ë“œ */
.grid {
  display: grid;
  grid-template-columns: repeat(auto-fit,minmax(300px,1fr));
  gap: 30px;
  padding: 28px 80px 160px;
  max-width: 1200px;
  margin: 0 auto;
}
.card {
  position: relative;
  border-radius: 16px;
  overflow: hidden;
  box-shadow: var(--shadow);
  cursor: pointer;
  opacity: 0;
  transform: translateY(30px);
  transition: all 0.5s;
  background: var(--card-bg);
}
.card.visible {
  opacity: 1;
  transform: translateY(0);
}
.card:hover {
  transform: translateY(-8px) scale(1.02);
  box-shadow: 0 12px 28px rgba(0,0,0,0.2);
}
.card img {
  width: 100%;
  height: 250px;
  object-fit: cover;
  filter: brightness(0.9);
  transition: all 0.3s;
}
.card:hover img {
  filter: brightness(1);
  transform: scale(1.05);
}
.card-overlay {
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  background: linear-gradient(to top,rgba(0,0,0,0.8) 0,transparent 100%);
  padding: 20px;
  transition: transform 0.3s;
}
.card h3 {
  color: #fff;
  font-size: 1.4em;
  text-shadow: 0 2px 8px rgba(0,0,0,0.8);
  margin: 0 0 5px;
}
.card-category {
  color: rgba(255,255,255,0.8);
  font-size: 0.85em;
  text-shadow: 0 1px 4px rgba(0,0,0,0.6);
}
.card .bookmark {
  position: absolute;
  top: 15px;
  right: 15px;
  font-size: 24px;
  color: #fff;
  text-shadow: 0 2px 6px rgba(0,0,0,0.8);
  cursor: pointer;
  user-select: none;
  transition: all 0.2s;
  z-index: 10;
}
.card .bookmark:hover {
  transform: scale(1.2);
}
.card .bookmark.active {
  color: #ffd84d;
}

/* ìƒì„¸ íŒ¨ë„ */
.detail-panel {
  position: fixed;
  left: 0;
  bottom: -100%;
  width: 100%;
  background: var(--card-bg);
  border-radius: 20px 20px 0 0;
  box-shadow: 0 -6px 30px rgba(0,0,0,0.4);
  transition: bottom 0.4s cubic-bezier(0.4,0,0.2,1);
  z-index: 1500;
  max-height: 65vh;
  overflow-y: auto;
}
.detail-panel.show {
  bottom: 0;
}
.detail-content {
  padding: 25px 30px 30px;
}
.detail-content h2 {
  color: var(--primary);
  margin-top: 5px;
  font-size: 28px;
  margin-bottom: 8px;
}
.detail-sub {
  font-size: 14px;
  color: var(--muted);
  margin-bottom: 15px;
  font-style: italic;
}
.detail-summary {
  line-height: 1.8;
  font-size: 15px;
  margin-bottom: 20px;
  color: var(--text-color);
}
.detail-info {
  display: grid;
  grid-template-columns: repeat(auto-fit,minmax(180px,1fr));
  gap: 15px;
  margin-bottom: 20px;
}
.info-item {
  background: rgba(90,168,151,0.08);
  padding: 12px 15px;
  border-radius: 10px;
  border-left: 3px solid var(--primary);
}
.info-item strong {
  color: var(--primary);
  display: block;
  margin-bottom: 5px;
  font-size: 14px;
}
.info-item span {
  font-size: 13px;
  color: var(--text-color);
}
.detail-buttons {
  display: flex;
  gap: 12px;
  margin-top: 20px;
  justify-content: center;
}
.detail-btn {
  flex: 1;
  max-width: 200px;
  padding: 14px 0;
  text-align: center;
  border-radius: 25px;
  font-weight: 600;
  font-size: 15px;
  cursor: pointer;
  transition: all 0.3s;
  text-decoration: none;
  border: none;
}
.detail-btn.close {
  background: var(--card-bg);
  color: var(--text-color);
  border: 2px solid var(--border);
}
.detail-btn.close:hover {
  background: rgba(90,168,151,0.1);
  border-color: var(--primary);
  transform: translateY(-2px);
}
.detail-btn.more {
  background: linear-gradient(135deg,var(--primary),var(--primary-dark));
  color: #fff;
  box-shadow: 0 4px 12px rgba(90,168,151,0.3);
}
.detail-btn.more:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 16px rgba(90,168,151,0.4);
}

/* íŒ¨ë„ ì˜¤ë²„ë ˆì´ */
.panel-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.5);
  opacity: 0;
  visibility: hidden;
  transition: all 0.3s;
  z-index: 1400;
}
.panel-overlay.show {
  opacity: 1;
  visibility: visible;
}

/* í”Œë¡œíŒ… ë²„íŠ¼ */
.floating-back {
  position: fixed;
  bottom: 25px;
  right: 25px;
  background: var(--primary);
  color: #fff;
  font-weight: 600;
  padding: 12px 20px;
  border-radius: 25px;
  box-shadow: 0 3px 10px rgba(0,0,0,0.2);
  cursor: pointer;
  transition: all 0.3s;
  z-index: 3000;
}
.floating-back:hover {
  background: var(--primary-dark);
  transform: scale(1.05);
}

/* ë¦¬ë·° ì•„ì´í…œ */
.detail-content .review-item {
  background: var(--card-bg);
  border: 1px solid var(--border);
  border-radius: 12px;
  padding: 15px 20px;
  margin-bottom: 15px;
  box-shadow: var(--shadow);
}
.detail-content .review-item h4 {
  color: var(--primary);
  margin-bottom: 6px;
}
.detail-content .review-item p {
  margin: 4px 0;
}
.detail-content .review-item small {
  color: var(--muted);
}

/* ë°˜ì‘í˜• */
@media(max-width:960px) {
  .navbar { padding: 0 16px; }
  .nav-menu { gap: 16px; }
  .hero { height: 360px; }
  .hero-text h2 { font-size: 32px; }
  .hero-text p { font-size: 16px; }
  .grid { padding: 24px 20px 120px; }
  .quick-stats { grid-template-columns: repeat(2,1fr); }
  .detail-info { grid-template-columns: 1fr; }
}
@media(max-width:640px) {
  .nav-menu a:nth-child(3) { display: none; }
  .search-box input { width: 150px; }
  .search-box input:focus { width: 190px; }
  .planner-header {
    flex-direction: column;
    align-items: flex-start;
  }
  .floating-back {
    bottom: 18px;
    right: 18px;
    padding: 10px 16px;
  }
  .quick-stats { grid-template-columns: 1fr; }
  .filter-bar { gap: 8px; }
  .detail-buttons {
    flex-direction: column;
    gap: 10px;
  }
  .detail-btn { max-width: 100%; }
}
</style>
</head>
<body>

<div id="preloader">
  <div class="loader-logo">YOKOHAMA TRAVEL</div>
  <div class="loader-bar"></div>
</div>

<nav class="navbar">
  <h1 onclick="window.location.href='yokohama.html'">Yokohama Travel</h1>
  <div class="nav-menu">
    <a href="yokohama.html" class="active">í™ˆ</a>
    <div class="dropdown">
      <a href="#" class="active">ìš”ì½”í•˜ë§ˆ ì†Œê°œ</a>
      <div class="dropdown-content">
        <a href="yokohama_overview.html">ë„ì‹œ ê°œìš”</a>
        <a href="yokohama_port.html">í•­êµ¬ì™€ ê´€ê´‘</a>
        <a href="yokohama_culture.html">ë¬¸í™”ì™€ ì—­ì‚¬</a>
      </div>
    </div>
    <a href="yokohama_map.html">ì§€ë„ë³´ê¸°</a>
  </div>
  <div style="display:flex;align-items:center">
    <button class="theme-toggle moon" id="themeToggle" aria-label="ë‹¤í¬ ëª¨ë“œ ì „í™˜">ğŸŒ™</button>
    <div class="search-box">
      <input type="text" id="searchInput" placeholder="ìš”ì½”í•˜ë§ˆ ì—¬í–‰ì§€ ê²€ìƒ‰...">
      <span class="search-icon">ğŸ”</span>
      <div class="suggestions" id="suggestions"></div>
    </div>
  </div>
</nav>

<div class="scroll-progress" id="scrollBar"></div>

<section id="mainContent">
  <section class="hero">
    <div class="hero-text">
      <h2>YOKOHAMA TRAVEL GUIDE</h2>
      <p>ì¼ë³¸ ìµœëŒ€ í•­êµ¬ë„ì‹œì˜ ë‚­ë§Œê³¼ ë¯¸ë˜ê°€ ê³µì¡´í•˜ëŠ” ê³³</p>
    </div>
    <div class="weather-widget" id="weatherWidget">
      â›… í˜„ì¬ ìš”ì½”í•˜ë§ˆ: 16â„ƒ / ë§‘ìŒ
    </div>
  </section>

  <section class="quick-stats">
    <div class="stat-card" onclick="filterFavorites()">
      <div class="stat-number" id="favoriteCount">0</div>
      <div class="stat-label">ë‚´ ì¦ê²¨ì°¾ê¸° ì—¬í–‰ì§€ ìˆ˜</div>
    </div>
    <div class="stat-card" onclick="showMyReviews()">
      <div class="stat-number" id="reviewCount">0</div>
      <div class="stat-label">ì‘ì„±ëœ ë¦¬ë·° ìˆ˜</div>
    </div>
  </section>

  <section class="planner">
    <div class="planner-header">
      <h2>ğŸ“… ìš”ì½”í•˜ë§ˆ ë§ì¶¤ ì—¬í–‰ ì½”ìŠ¤</h2>
      <button class="planner-toggle-btn" id="plannerToggle">ì½”ìŠ¤ í¼ì³ë³´ê¸°</button>
    </div>
    <div class="planner-box" id="plannerBox">
      <p class="planner-subtitle">ì—¬í–‰ ê¸°ê°„ê³¼ í‚¤ì›Œë“œë¥¼ ì„ íƒí•˜ì—¬ ìš”ì½”í•˜ë§ˆ í•­êµ¬ì™€ ë„ì‹¬ì„ ì—®ì€ ë‚˜ë§Œì˜ ì½”ìŠ¤ë¥¼ ë§Œë“¤ì–´ë³´ì„¸ìš”.</p>
      
      <div style="margin:15px 0">
        <label style="font-weight:600;font-size:15px;color:var(--text-color);display:block;margin-bottom:8px">
          ğŸ—“ï¸ ì—¬í–‰ ê¸°ê°„ ì„ íƒ
        </label>
        <div class="day-selector" id="daySelector">
          <button class="day-btn" data-days="1">1ì¼</button>
          <button class="day-btn active" data-days="2">2ì¼</button>
          <button class="day-btn" data-days="3">3ì¼</button>
        </div>
      </div>

      <div style="margin:15px 0">
        <label style="font-weight:600;font-size:15px;color:var(--text-color);display:block;margin-bottom:8px">
          ğŸ¯ ì—¬í–‰ í…Œë§ˆ ì„ íƒ
        </label>
        <div class="keyword-box" id="keywordBox">
          <button data-key="í•­êµ¬">âš“ í•­êµ¬</button>
          <button data-key="ì•¼ê²½">ğŸŒƒ ì•¼ê²½</button>
          <button data-key="ë°•ë¬¼ê´€">ğŸ›ï¸ ë°•ë¬¼ê´€</button>
          <button data-key="ì‡¼í•‘">ğŸ›ï¸ ì‡¼í•‘</button>
          <button data-key="ìŒì‹">ğŸœ ìŒì‹</button>
          <button data-key="ì¹´í˜">â˜• ì¹´í˜</button>
          <button data-key="ì‚¬ì§„">ğŸ“· ì‚¬ì§„</button>
        </div>
      </div>

      <button class="planner-generate-btn" id="plannerGenerate">âœ¨ ë§ì¶¤ ì½”ìŠ¤ ìƒì„±í•˜ê¸°</button>
      <div class="planner-result" id="plannerResult"></div>
    </div>
  </section>

  <div class="filter-bar">
    <span>ğŸ·ï¸ í…Œë§ˆ ì„ íƒ:</span>
    <button class="active" data-filter="all">ì „ì²´</button>
    <button data-filter="port">í•­êµ¬Â·í•´ë³€</button>
    <button data-filter="city">ë„ì‹¬Â·ë¬¸í™”</button>
  </div>

  <section class="grid">
    <div class="card" data-id="redbrick" data-category="port" onclick="cardClick(event,'redbrick')">
      <img src="yokohamaimages/redbrick.jpg" alt="ë ˆë“œë¸Œë¦­ ì°½ê³ " loading="lazy">
      <div class="card-overlay">
        <h3>ë ˆë“œë¸Œë¦­ ì°½ê³ </h3>
        <div class="card-category">ğŸ§± í•­êµ¬Â·í•´ë³€</div>
      </div>
      <div class="bookmark" data-id="redbrick">â˜…</div>
    </div>
    <div class="card" data-id="cosmoworld" data-category="city" onclick="cardClick(event,'cosmoworld')">
      <img src="yokohamaimages/cosmoworld.jpg" alt="ì½”ìŠ¤ëª¨ ì›”ë“œ" loading="lazy">
      <div class="card-overlay">
        <h3>ì½”ìŠ¤ëª¨ ì›”ë“œ</h3>
        <div class="card-category">ğŸ¡ ë„ì‹¬Â·ë¬¸í™”</div>
      </div>
      <div class="bookmark" data-id="cosmoworld">â˜…</div>
    </div>
    <div class="card" data-id="landmark" data-category="city" onclick="cardClick(event,'landmark')">
      <img src="yokohamaimages/landmark.jpg" alt="ëœë“œë§ˆí¬ íƒ€ì›Œ" loading="lazy">
      <div class="card-overlay">
        <h3>ëœë“œë§ˆí¬ íƒ€ì›Œ</h3>
        <div class="card-category">ğŸ¢ ë„ì‹¬Â·ë¬¸í™”</div>
      </div>
      <div class="bookmark" data-id="landmark">â˜…</div>
    </div>
  </section>
</section>

<div class="panel-overlay" id="panelOverlay" onclick="closePanel()"></div>
<div id="detailPanel" class="detail-panel">
  <div class="detail-content" id="detailContent"></div>
</div>

<div class="floating-back" onclick="window.location.href='../kanto.html'">â† ê´€ë™ì§€ë°©</div>

<script>
// í”„ë¦¬ë¡œë”
window.addEventListener('load', function() {
  document.getElementById('preloader').classList.add('hide');
});

// ë‹¤í¬ëª¨ë“œ
var themeToggle = document.getElementById('themeToggle');
var savedTheme = localStorage.getItem('yokohamaTheme');
if (savedTheme === 'dark') {
  document.body.classList.add('dark-mode');
  themeToggle.textContent = 'â˜€';
  themeToggle.classList.remove('moon');
  themeToggle.classList.add('sun');
}
themeToggle.addEventListener('click', function() {
  document.body.classList.toggle('dark-mode');
  var isDark = document.body.classList.contains('dark-mode');
  themeToggle.textContent = isDark ? 'â˜€' : 'ğŸŒ™';
  themeToggle.classList.toggle('sun', isDark);
  themeToggle.classList.toggle('moon', !isDark);
  localStorage.setItem('yokohamaTheme', isDark ? 'dark' : 'light');
});

// ìŠ¤í¬ë¡¤ ì§„í–‰ë°”
window.addEventListener('scroll', function() {
  var docHeight = document.documentElement.scrollHeight - window.innerHeight;
  if (docHeight <= 0) return;
  var scrolled = (window.scrollY / docHeight) * 100;
  document.getElementById('scrollBar').style.width = scrolled + '%';
});

// í”Œë˜ë„ˆ í† ê¸€
var plannerToggle = document.getElementById('plannerToggle');
var plannerBox = document.getElementById('plannerBox');
plannerToggle.addEventListener('click', function() {
  plannerBox.classList.toggle('open');
  plannerToggle.textContent = plannerBox.classList.contains('open') ? 'ì½”ìŠ¤ ì ‘ê¸°' : 'ì½”ìŠ¤ í¼ì³ë³´ê¸°';
});

// ì¼ìˆ˜ ì„ íƒ
var selectedDays = 2;
var dayButtons = document.querySelectorAll('.day-btn');
dayButtons.forEach(function(btn) {
  btn.addEventListener('click', function() {
    dayButtons.forEach(function(b) { b.classList.remove('active'); });
    btn.classList.add('active');
    selectedDays = parseInt(btn.dataset.days, 10);
  });
});

// í‚¤ì›Œë“œ ì„ íƒ
var keywordButtons = document.querySelectorAll('#keywordBox button');
keywordButtons.forEach(function(btn) {
  btn.addEventListener('click', function() {
    btn.classList.toggle('active');
  });
});

// ì½”ìŠ¤ ìƒì„±
document.getElementById('plannerGenerate').addEventListener('click', function() {
  var selected = Array.from(keywordButtons)
    .filter(function(b) { return b.classList.contains('active'); })
    .map(function(b) { return b.dataset.key; });
  
  if (selected.length === 0) {
    document.getElementById('plannerResult').innerHTML =
      '<p style="color:var(--accent);margin-top:10px;padding:15px;background:rgba(230,57,70,0.1);border-radius:10px;text-align:center">âš ï¸ í•˜ë‚˜ ì´ìƒì˜ ì—¬í–‰ í…Œë§ˆë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.</p>';
    return;
  }

  var courseDB = {
    í•­êµ¬: [
      'ë¯¸ë‚˜í† ë¯¸ë¼ì´ 21 ì›Œí„°í”„ë¡ íŠ¸ ì‚°ì±…',
      'ì•¼ë§ˆì‹œíƒ€ ê³µì› í•´ë³€ ê±·ê¸°',
      'ì˜¤ì‚°ë°”ì‹œ ë¶€ë‘ ì „ë§ëŒ€',
      'ìš”ì½”í•˜ë§ˆ í•­êµ¬ ìœ ëŒì„  íƒ‘ìŠ¹'
    ],
    ì•¼ê²½: [
      'ëœë“œë§ˆí¬ íƒ€ì›Œ ìŠ¤ì¹´ì´ê°€ë“  ì „ë§ëŒ€',
      'ì½”ìŠ¤ëª¨ì›”ë“œ ê´€ëŒì°¨ì—ì„œ ì•¼ê²½ ê°ìƒ',
      'ë¯¸ë‚˜í† ë¯¸ë¼ì´ ì¼ë£¨ë¯¸ë„¤ì´ì…˜ êµ¬ê²½',
      'ë² ì´ë¸Œë¦¬ì§€ ì•¼ê²½ í¬í† ìŠ¤íŒŸ'
    ],
    ë°•ë¬¼ê´€: [
      'ì»µë¼ë©´ ë°•ë¬¼ê´€ ì²´í—˜',
      'ìš”ì½”í•˜ë§ˆ ë¯¸ìˆ ê´€ ê´€ëŒ',
      'ì‹ ìš”ì½”í•˜ë§ˆ ë¼ë©˜ ë°•ë¬¼ê´€',
      'ë‹›ì‚° ê¸€ë¡œë²Œ ë³¸ì‚¬ ê°¤ëŸ¬ë¦¬'
    ],
    ì‡¼í•‘: [
      'ì•„ì¹´ë Œê°€ ì°½ê³  ì‡¼í•‘ëª°',
      'ëª¨í† ë§ˆì¹˜ ì‡¼í•‘ ìŠ¤íŠ¸ë¦¬íŠ¸',
      'í€¸ì¦ˆ ìŠ¤í€˜ì–´ ìš”ì½”í•˜ë§ˆ',
      'ìš”ì½”í•˜ë§ˆ ì›”ë“œ í¬í„°ì¦ˆ'
    ],
    ìŒì‹: [
      'ì°¨ì´ë‚˜íƒ€ìš´ ì¤‘í™”ìš”ë¦¬ ë§›ì§‘ íˆ¬ì–´',
      'ì´ì—ì¼€ì´ ë¼ë©˜ ë³¸ì ',
      'í•­êµ¬ ê·¼ì²˜ í•´ì‚°ë¬¼ ë ˆìŠ¤í† ë‘',
      'ëª¨í† ë§ˆì¹˜ ì¹´ë ˆ ë§›ì§‘'
    ],
    ì¹´í˜: [
      'ì•„ì¹´ë Œê°€ ì°½ê³  í•´ë³€ ì¹´í˜',
      'ì•¼ë§ˆì‹œíƒ€ ê³µì› ì˜¤ì…˜ë·° ì¹´í˜',
      'ëª¨í† ë§ˆì¹˜ ë ˆíŠ¸ë¡œ ì¹´í˜ íƒë°©',
      'ë¯¸ë‚˜í† ë¯¸ë¼ì´ ë£¨í”„íƒ‘ ì¹´í˜'
    ],
    ì‚¬ì§„: [
      'ëœë“œë§ˆí¬ íƒ€ì›Œì™€ ê´€ëŒì°¨ ì•¼ê²½ìƒ·',
      'ì°¨ì´ë‚˜íƒ€ìš´ ì„ ë¦°ë¬¸ ì¸ì¦ìƒ·',
      'ì•„ì¹´ë Œê°€ ì°½ê³  ë ˆíŠ¸ë¡œ ê±´ë¬¼',
      'ì˜¤ì‚°ë°”ì‹œ ë¶€ë‘ ì„ì–‘ ì‚¬ì§„'
    ]
  };

  var allActivities = [];
  selected.forEach(function(key) {
    if (courseDB[key]) {
      allActivities = allActivities.concat(courseDB[key]);
    }
  });
  allActivities = Array.from(new Set(allActivities));

  var itemsPerDay = Math.ceil(allActivities.length / selectedDays);
  var html = '<div style="margin-top:15px"><h4 style="color:var(--primary);margin-bottom:10px">ğŸ‰ ìƒì„±ëœ ë§ì¶¤ ì½”ìŠ¤</h4><table class="planner-table">';
  
  for (var day = 1; day <= selectedDays; day++) {
    var start = (day - 1) * itemsPerDay;
    var end = Math.min(start + itemsPerDay, allActivities.length);
    var dayActivities = allActivities.slice(start, end);
    var activities = dayActivities.length > 0 ? dayActivities.join(' â†’ ') : 'ììœ  ì¼ì •';
    html += '<tr><th>' + day + 'ì¼ì°¨</th><td>' + activities + '</td></tr>';
  }
  
  html += '</table>' +
    '<div style="margin-top:15px;padding:12px;background:rgba(90,168,151,0.08);border-radius:10px;font-size:13px;color:var(--muted)">' +
    'ğŸ’¡ Tip: ì¼ì •ì€ ì°¸ê³ ìš©ì´ë©°, ì‹¤ì œ ì´ë™ì‹œê°„ê³¼ ë‚ ì”¨ì— ë§ì¶° ììœ ë¡­ê²Œ ì¡°ì •í•˜ì„¸ìš”.' +
    '</div>' +
    '<button onclick="saveCourse()" style="margin-top:10px;border:none;background:var(--primary);color:#fff;padding:8px 16px;border-radius:16px;cursor:pointer;font-size:13px;transition:all 0.3s">ğŸ“¥ ì½”ìŠ¤ ì €ì¥í•˜ê¸°</button>' +
    '</div>';
  
  document.getElementById('plannerResult').innerHTML = html;
});

function saveCourse() {
  var result = document.getElementById('plannerResult').innerText;
  localStorage.setItem('yokohamaSavedCourse', result);
  alert('âœ… ì—¬í–‰ ì½”ìŠ¤ê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\n\në¸Œë¼ìš°ì €ë¥¼ ë‹¤ì‹œ ì—´ì–´ë„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.');
}

// ì¹´ë“œ ì• ë‹ˆë©”ì´ì…˜
var cards = document.querySelectorAll('.card');
var observer = new IntersectionObserver(function(entries) {
  entries.forEach(function(entry) {
    if (entry.isIntersecting) {
      entry.target.classList.add('visible');
      observer.unobserve(entry.target);
    }
  });
}, { threshold: 0.2 });
cards.forEach(function(card) { observer.observe(card); });

// ê²€ìƒ‰
var input = document.getElementById('searchInput');
var suggestions = document.getElementById('suggestions');
var places = [
  { name: 'ë ˆë“œë¸Œë¦­ ì°½ê³ ', id: 'redbrick' },
  { name: 'ì½”ìŠ¤ëª¨ ì›”ë“œ', id: 'cosmoworld' },
  { name: 'ëœë“œë§ˆí¬ íƒ€ì›Œ', id: 'landmark' }
];
input.addEventListener('input', function() {
  var v = input.value.trim();
  suggestions.innerHTML = '';
  if (v === '') {
    suggestions.style.display = 'none';
    return;
  }
  var f = places.filter(function(p) { return p.name.includes(v); });
  if (f.length > 0) {
    f.forEach(function(p) {
      var d = document.createElement('div');
      d.textContent = p.name;
      d.onclick = function() {
        showDetail(p.id);
        suggestions.style.display = 'none';
        input.value = '';
      };
      suggestions.appendChild(d);
    });
  } else {
    var noResult = document.createElement('div');
    noResult.textContent = 'ê²€ìƒ‰ê²°ê³¼ ì—†ìŒ';
    noResult.style.color = '#999';
    noResult.style.textAlign = 'center';
    noResult.style.padding = '10px 0';
    suggestions.appendChild(noResult);
  }
  suggestions.style.display = 'block';
});
input.addEventListener('keypress', function(e) {
  if (e.key === 'Enter') {
    var first = suggestions.querySelector('div');
    if (first && first.textContent !== 'ê²€ìƒ‰ê²°ê³¼ ì—†ìŒ') first.click();
  }
});
document.addEventListener('click', function(e) {
  if (!input.contains(e.target) && !suggestions.contains(e.target)) {
    suggestions.style.display = 'none';
  }
});

// ìƒì„¸ íŒ¨ë„ ë°ì´í„°
var panel = document.getElementById('detailPanel');
var panelOverlay = document.getElementById('panelOverlay');
var content = document.getElementById('detailContent');
var currentId = '';

var details = {
  redbrick: {
    title: 'ë ˆë“œë¸Œë¦­ ì°½ê³ ',
    subtitle: 'ì—­ì‚¬ì  ê±´ì¶•ë¬¼ì„ ì¬ìƒí•œ ë¬¸í™”ìƒì—…ì‹œì„¤',
    coords: { lat: 35.4529, lng: 139.6425 },
    summary: 'ë ˆë“œë¸Œë¦­ ì°½ê³ ëŠ” 1911ë…„ì— ì§€ì–´ì§„ ë¶‰ì€ ë²½ëŒ ì°½ê³ ë¥¼ ë³µì›í•œ ë³µí•©ë¬¸í™”ì‹œì„¤ì…ë‹ˆë‹¤. ë ˆìŠ¤í† ë‘, ì¹´í˜, ì¡í™”ì  ë“±ì´ ì…ì í•´ ìˆìœ¼ë©°, ì•¼ì™¸ ê´‘ì¥ì—ì„œëŠ” ì‹œì¦Œë³„ ì´ë²¤íŠ¸ê°€ ì—´ë¦½ë‹ˆë‹¤. í•­êµ¬ë¥¼ ë°”ë¼ë³´ëŠ” ì „ë§ê³¼ ë ˆíŠ¸ë¡œí•œ ê±´ì¶•ë¯¸ê°€ ì¡°í™”ë¥¼ ì´ë£¨ì–´ ìš”ì½”í•˜ë§ˆì˜ ìƒì§•ì ì¸ ì¥ì†Œë¡œ ì‚¬ë‘ë°›ê³  ìˆìŠµë‹ˆë‹¤.',
    info: {
      location: 'ê°€ë‚˜ê°€ì™€í˜„ ìš”ì½”í•˜ë§ˆì‹œ ë‚˜ì¹´êµ¬',
      time: '11:00~20:00 (ìƒì ë³„ ìƒì´)',
      price: 'ì…ì¥ ë¬´ë£Œ, ìƒì  ì´ìš©ì‹œ ë³„ë„',
      duration: '1~2ì‹œê°„'
    },
    link: 'redbrick.html'
  },
  cosmoworld: {
    title: 'ì½”ìŠ¤ëª¨ ì›”ë“œ',
    subtitle: 'ë¯¸ë‚˜í† ë¯¸ë¼ì´ì˜ ìƒì§•ì ì¸ ìœ ì›ì§€',
    coords: { lat: 35.4552, lng: 139.6364 },
    summary: 'ì½”ìŠ¤ëª¨ ì›”ë“œëŠ” ë¯¸ë‚˜í† ë¯¸ë¼ì´ ì¤‘ì‹¬ë¶€ì— ìœ„ì¹˜í•œ ë„ì‹¬í˜• ë†€ì´ê³µì›ì…ë‹ˆë‹¤. ë†’ì´ 112.5mì˜ ëŒ€ê´€ëŒì°¨ "ì½”ìŠ¤ëª¨ í´ë½21"ì€ ìš”ì½”í•˜ë§ˆì˜ ëœë“œë§ˆí¬ë¡œ, íŠ¹íˆ ì•¼ê²½ì´ ì•„ë¦„ë‹µê¸°ë¡œ ìœ ëª…í•©ë‹ˆë‹¤. ì…ì¥ë£Œ ì—†ì´ íƒ‘ìŠ¹ê¶Œë§Œ êµ¬ë§¤í•˜ë©´ ë˜ì–´ ë¶€ë‹´ ì—†ì´ ì¦ê¸¸ ìˆ˜ ìˆìœ¼ë©°, ê°€ì¡± ë‹¨ìœ„ ë°©ë¬¸ê°ë“¤ì—ê²Œ ì¸ê¸°ê°€ ë§ìŠµë‹ˆë‹¤.',
    info: {
      location: 'ê°€ë‚˜ê°€ì™€í˜„ ìš”ì½”í•˜ë§ˆì‹œ ë‚˜ì¹´êµ¬',
      time: '11:00~21:00 (ê³„ì ˆë³„ ìƒì´)',
      price: 'ì…ì¥ ë¬´ë£Œ, ë†€ì´ê¸°êµ¬ë³„ ìš”ê¸ˆ',
      duration: '1~3ì‹œê°„'
    },
    link: 'cosmoworld.html'
  },
  landmark: {
    title: 'ëœë“œë§ˆí¬ íƒ€ì›Œ',
    subtitle: 'ìš”ì½”í•˜ë§ˆ ìµœê³ ì¸µ ë¹Œë”©ê³¼ ì „ë§ëŒ€',
    coords: { lat: 35.4545, lng: 139.6312 },
    summary: 'ëœë“œë§ˆí¬ íƒ€ì›ŒëŠ” ë†’ì´ 296më¡œ ìš”ì½”í•˜ë§ˆì—ì„œ ê°€ì¥ ë†’ì€ ê±´ë¬¼ì…ë‹ˆë‹¤. 69ì¸µ ìŠ¤ì¹´ì´ê°€ë“  ì „ë§ëŒ€ì—ì„œëŠ” ìš”ì½”í•˜ë§ˆ ì „ê²½ì€ ë¬¼ë¡  ë‚ ì”¨ê°€ ì¢‹ìœ¼ë©´ ë„ì¿„, í›„ì§€ì‚°ê¹Œì§€ ì¡°ë§í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì‡¼í•‘ëª°, í˜¸í…”, ë ˆìŠ¤í† ë‘ì´ í•¨ê»˜ ìˆì–´ í•˜ë£¨ ì¢…ì¼ ì¦ê¸¸ ìˆ˜ ìˆëŠ” ë³µí•© ì‹œì„¤ì…ë‹ˆë‹¤.',
    info: {
      location: 'ê°€ë‚˜ê°€ì™€í˜„ ìš”ì½”í•˜ë§ˆì‹œ ë‹ˆì‹œêµ¬',
      time: 'ì „ë§ëŒ€ 10:00~21:00',
      price: 'ì „ë§ëŒ€ ì–´ë¥¸ 1,000ì—”',
      duration: '1~2ì‹œê°„'
    },
    link: 'landmark.html'
  }
};

function showDetail(id) {
  var detail = details[id];
  if (!detail) return;

  var mapUrl = 'https://www.google.com/maps?q=' + detail.coords.lat + ',' + detail.coords.lng + '&hl=ko&z=15&output=embed';

  var html = ''
    + '<h2>' + detail.title + '</h2>'
    + '<div class="detail-sub">' + detail.subtitle + '</div>'
    + '<div style="width:100%;height:260px;border-radius:14px;margin:8px 0 15px;box-shadow:var(--shadow);overflow:hidden">'
    + '<iframe src="' + mapUrl + '" style="width:100%;height:100%;border:0" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>'
    + '</div>'
    + '<p class="detail-summary">' + detail.summary + '</p>'
    + '<div class="detail-info">'
    + '<div class="info-item"><strong>ğŸ“ ìœ„ì¹˜</strong><span>' + detail.info.location + '</span></div>'
    + '<div class="info-item"><strong>ğŸ• ìš´ì˜ì‹œê°„</strong><span>' + detail.info.time + '</span></div>'
    + '<div class="info-item"><strong>ğŸ’° ì…ì¥ë£Œ</strong><span>' + detail.info.price + '</span></div>'
    + '<div class="info-item"><strong>â±ï¸ ì†Œìš”ì‹œê°„</strong><span>' + detail.info.duration + '</span></div>'
    + '</div>'
    + '<div class="detail-buttons">'
    + '<button class="detail-btn close" onclick="closePanel()">â† ëŒì•„ê°€ê¸°</button>'
    + '<a href="' + detail.link + '" class="detail-btn more">ìƒì„¸ë³´ê¸° â†’</a>'
    + '</div>';

  content.innerHTML = html;
  panel.classList.add('show');
  panelOverlay.classList.add('show');
  currentId = id;
  document.body.style.overflow = 'hidden';
}

function closePanel() {
  panel.classList.remove('show');
  panelOverlay.classList.remove('show');
  currentId = '';
  document.body.style.overflow = '';
}

function cardClick(event, id) {
  var target = event.target;
  if (target.classList.contains('bookmark')) return;
  showDetail(id);
}

// ESC í‚¤ë¡œ íŒ¨ë„ ë‹«ê¸°
document.addEventListener('keydown', function(e) {
  if (e.key === 'Escape' && panel.classList.contains('show')) {
    closePanel();
  }
});

// ì¦ê²¨ì°¾ê¸°
var favorites = JSON.parse(localStorage.getItem('yokohamaFavorites') || '[]');
var bookmarkButtons = document.querySelectorAll('.bookmark');

function updateBookmarksUI() {
  bookmarkButtons.forEach(function(btn) {
    var id = btn.dataset.id;
    if (favorites.includes(id)) {
      btn.classList.add('active');
    } else {
      btn.classList.remove('active');
    }
  });
  updateStats();
}
updateBookmarksUI();

bookmarkButtons.forEach(function(btn) {
  btn.addEventListener('click', function(e) {
    e.stopPropagation();
    var id = btn.dataset.id;
    if (favorites.includes(id)) {
      favorites = favorites.filter(function(f) { return f !== id; });
    } else {
      favorites.push(id);
    }
    localStorage.setItem('yokohamaFavorites', JSON.stringify(favorites));
    updateBookmarksUI();
  });
});

// ì¦ê²¨ì°¾ê¸° í•„í„° í•¨ìˆ˜
function filterFavorites() {
  var filterButtons = document.querySelectorAll('.filter-bar button');
  filterButtons.forEach(function(b) { b.classList.remove('active'); });
  cards.forEach(function(card) {
    var id = card.dataset.id;
    card.style.display = favorites.includes(id) ? 'block' : 'none';
  });
}

// ë¦¬ë·° ëª¨ì•„ ë³´ê¸°
function showMyReviews() {
  var reviews = JSON.parse(localStorage.getItem('yokohamaReviews') || '[]');
  var html = '<h2 style="margin-bottom:15px;color:var(--primary)">ğŸ“ ì‘ì„±ëœ ë¦¬ë·° (' + reviews.length + 'ê°œ)</h2>';

  if (reviews.length === 0) {
    html += '<p style="text-align:center;padding:40px;color:var(--muted)">'
      + 'ì•„ì§ ì‘ì„±ëœ ë¦¬ë·°ê°€ ì—†ìŠµë‹ˆë‹¤.<br>'
      + 'ë ˆë“œë¸Œë¦­ ì°½ê³ Â·ì½”ìŠ¤ëª¨ ì›”ë“œÂ·ëœë“œë§ˆí¬ íƒ€ì›Œ ë“± ìƒì„¸ í˜ì´ì§€ì—ì„œ ë¦¬ë·°ë¥¼ ì‘ì„±í•´ ì£¼ì„¸ìš”.'
      + '</p>';
  } else {
    reviews.sort(function(a, b) {
      var da = new Date(a.date);
      var db = new Date(b.date);
      return db - da;
    });

    html += reviews.map(function(r) {
      var rating = Number(r.rating) || 0;
      var stars = 'â˜…'.repeat(rating) + 'â˜†'.repeat(5 - rating);
      return '<div class="review-item">'
        + '<h4>' + r.place + '</h4>'
        + '<p>ë³„ì : ' + stars + '</p>'
        + '<p>ì‘ì„±ì: ' + r.nickname + '</p>'
        + '<p>' + r.content + '</p>'
        + '<small>' + r.date + '</small>'
        + '</div>';
    }).join('');
  }

  html += '<div class="detail-buttons" style="margin-top:25px">'
    + '<button class="detail-btn close" onclick="closePanel()" style="max-width:100%">â† ëŒì•„ê°€ê¸°</button>'
    + '</div>';

  content.innerHTML = html;
  panel.classList.add('show');
  panelOverlay.classList.add('show');
  document.body.style.overflow = 'hidden';
  currentId = 'reviews';
}

// í•„í„° ë²„íŠ¼
var filterButtons = document.querySelectorAll('.filter-bar button');
filterButtons.forEach(function(btn) {
  btn.addEventListener('click', function() {
    var category = btn.dataset.filter;
    filterButtons.forEach(function(b) { b.classList.remove('active'); });
    btn.classList.add('active');
    cards.forEach(function(card) {
      var cardCat = card.dataset.category;
      var show = false;
      if (category === 'all') show = true;
      else if (category === cardCat) show = true;
      card.style.display = show ? 'block' : 'none';
    });
  });
});

// í†µê³„ ì—…ë°ì´íŠ¸
function updateStats() {
  var favEl = document.getElementById('favoriteCount');
  var revEl = document.getElementById('reviewCount');
  var favs = JSON.parse(localStorage.getItem('yokohamaFavorites') || '[]');
  var revs = JSON.parse(localStorage.getItem('yokohamaReviews') || '[]');
  if (favEl) favEl.textContent = favs.length;
  if (revEl) revEl.textContent = revs.length;
}
updateStats();
</script>

</body>
</html>